---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: Backend
metadata:
  name: openai-backend
spec:
  endpoints:
    - fqdn:
        hostname: api.openai.com
        port: 443
  tls:
    sni: api.openai.com
---
apiVersion: gateway.networking.k8s.io/v1alpha3
kind: BackendTLSPolicy
metadata:
  name: openai-tls
spec:
  targetRefs:
    - group: gateway.envoyproxy.io
      kind: Backend
      name: openai-backend
  validation:
    wellKnownCACertificates: System
    hostname: api.openai.com
---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: Backend
metadata:
  name: anthropic-backend
spec:
  endpoints:
    - fqdn:
        hostname: api.anthropic.com
        port: 443
  tls:
    sni: api.anthropic.com
---
apiVersion: gateway.networking.k8s.io/v1alpha3
kind: BackendTLSPolicy
metadata:
  name: anthropic-tls
spec:
  targetRefs:
    - group: gateway.envoyproxy.io
      kind: Backend
      name: anthropic-backend
  validation:
    wellKnownCACertificates: System
    hostname: api.anthropic.com
---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: Backend
metadata:
  name: google-backend
spec:
  endpoints:
    - fqdn:
        hostname: generativelanguage.googleapis.com
        port: 443
  tls:
    sni: generativelanguage.googleapis.com
---
# TLS policy for HTTPS upstream to GitHub Copilot API
apiVersion: gateway.networking.k8s.io/v1alpha3
kind: BackendTLSPolicy
metadata:
  name: google-tls
spec:
  targetRefs:
    - group: gateway.envoyproxy.io
      kind: Backend
      name: google-backend
  validation:
    wellKnownCACertificates: System
    hostname: generativelanguage.googleapis.com
---
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: Backend
metadata:
  name: vercel-backend
spec:
  endpoints:
    - fqdn:
        hostname: api.vercel.com # Verify if this is correct for Vercel AI SDK or similar
        port: 443
  tls:
    sni: api.vercel.com
---
apiVersion: gateway.networking.k8s.io/v1alpha3
kind: BackendTLSPolicy
metadata:
  name: vercel-tls
spec:
  targetRefs:
    - group: gateway.envoyproxy.io
      kind: Backend
      name: vercel-backend
  validation:
    wellKnownCACertificates: System
    hostname: api.vercel.com
