---
apiVersion: aigateway.envoyproxy.io/v1alpha1
kind: AIGatewayRoute
metadata:
  name: llm-router
  namespace: network
spec:
  parentRefs:
    - name: envoy-ai
      namespace: network
      kind: Gateway
      group: gateway.networking.k8s.io
  hostnames:
    - "ai.${DOMAIN1}"
  rules:
    # Google Flash 2.5 (Mapped to gemini-1.5-flash for demo)
    - matches:
        - headers:
            - name: x-ai-eg-model
              value: "google/flash2.5"
      backendRefs:
        - name: google
          kind: AIServiceBackend
          group: aigateway.envoyproxy.io
          # modelNameOverride: "gemini-1.5-flash" # Uncomment when supported/verified

    # Google Gemini 2.5 Pro (Mapped to gemini-1.5-pro for demo)
    - matches:
        - headers:
            - name: x-ai-eg-model
              value: "google/gemini2.5pro"
      backendRefs:
        - name: google
          kind: AIServiceBackend
          group: aigateway.envoyproxy.io
          # modelNameOverride: "gemini-1.5-pro"

    # Google Models Wildcard
    - matches:
        - headers:
            - name: x-ai-eg-model
              value: "google/*"
      backendRefs:
        - name: google
          kind: AIServiceBackend
          group: aigateway.envoyproxy.io
    # Vercel Models
    - matches:
        - headers:
            - name: x-ai-eg-model
              value: "vercel/*"
      backendRefs:
        - name: vercel
          kind: AIServiceBackend
          group: aigateway.envoyproxy.io
    # Anthropic Models
    - matches:
        - headers:
            - name: x-ai-eg-model
              value: "anthropic/*"
      backendRefs:
        - name: anthropic
          kind: AIServiceBackend
          group: aigateway.envoyproxy.io
    # Default to OpenAI
    - backendRefs:
        - name: openai
          kind: AIServiceBackend
          group: aigateway.envoyproxy.io
